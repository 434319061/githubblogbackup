---
title: 主机发现学习笔记(一)
date: 2020-05-12 21:09:47
tags: Http
---

首先先要了解协议中的<u>栈分层</u>

**OSI**     （Open System Interconnect），即开放式系统互联。

> 应用层：给应用提供服务。
> 表示层：确保从设备的应用层发出的数据可以被另一个设备应用层理解，把文件转换成bit流。
> 会话层：建立、管理、终止表示层实体和传输层间的通信会话。
> 传输层：流控、检错、纠错和端到端通信。
> 网络层：tcp/ip的实现、路由功能。
> 数据链路层：控制物理层的协议。
> 物理层：电器和机械方面。

> **TCP/IP**
> 应用层：是网络应用程序及其应用层协议存留的层次。该层包括了所有与网络相关的高层协议，如文件传输协议（FTP）、超文本传输协议（HTTP）、远程终端协议（Telent)、简单邮件传送协议（SMTP)、因特网中继聊天（IRC)等。
> 传输层：使源端主机和目标端主机上的对等实体可以进行会话。该层有两种服务质量不同的协议：传输控制协议（TCP）和用户数据报协议（UDP）。
> 互联网层：通过路径选择把分组发往目标网络或主机，进行网络拥塞控制以及差错控制，是整个TCP/IP协议栈的核心。
> 网络访问层：负责网络层和物理层之间的通信，将网络层接收到的数据分割成特定的可被物理层传输的帧，并让物理层进行实际的数据传送。

## 二层主机发现

二层主机发现指：利用ISO中链路层中的协议进行主机发现。一般使用**ARP**协议。

优点：（局域网中通信使用ARP协议，利用MAC地址作为对应的识别地址）

1、速度快

2、可靠性高

缺点：

无法扫描经过路由的主机

### 扫描工具

**arping**

> Kali自带；
>
> 缺点：只能对单个主机多次扫描。

**netdiscover**

> Kali自带；
>
> 针对特定的子网进行多主机。

## 三层主机发现

三层主机发现指：利用ISO中网络中的协议进行主机发现。一般使用**ICMP**协议。

优点：

1、可以发现远程主机 经过路由的主机

2、速度相对比较快

缺点：

1、经常被防火墙过滤

2、速度相比二层发现慢

### 扫描工具

**ping**

> ping IP地址
>
> Linux和windows都有自带，
>
> Linux下ping如果不指定-c参数，一直扫描。Windows下默认进行四次探测。 

 **fping**  

> fping -g IP地址/端口号
>
> Kali自带;
>
> 可以针对多个主机同时进行主机发现。

**hping3**

> hping3 -h //修改ICMP相关指令
>
> hping3 -c 扫描次数 --icmp IP地址
>
> Kali自带；
>
> 可以发送自定义 ICMP数据包 。

## 四层主机发现

四层发现指利用OSI中的传输层协议进行主机发现，一般使用**TCP、UDP**探测。

优点：

1、可探测远程主机

2、比三层发现更为可靠

缺点：

花费时间更长

### 扫描工具

**nmap**

> nmap IP地址
>
> Kali自带；
>
> 可以进行二、三、四层的探测 。

**hping3**  

> hping3 --udp -c 3 -p端口号 IP地址   
>
> //--udp	使用udp进行探测	-c 使用3次	默认端口为零	浏览器默认端口为80
>
> Kali自带；
>
> 可以进行对应的四层层主机发现。

Python脚本-**nWatch**  

> 安装：pip install python-nmap